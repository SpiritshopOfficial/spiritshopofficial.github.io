<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Polyrhythms by Spiritshop</title>
  
  <meta name="author" content="Spiritshop Official">
  <meta name="description" content="Polyrhytmic mixing tool">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Common Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="icon" type="image/png" href="/favicon.png">
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

  <!-- Dark Mode Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon-dark.svg" media="(prefers-color-scheme: dark)">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-dark-32x32.png" media="(prefers-color-scheme: dark)">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-dark-16x16.png" media="(prefers-color-scheme: dark)">

  <!-- Additional Favicon Configurations -->    
  <link rel="apple-touch-icon" sizes="180x180" href="/polyrhythms/p-apple-touch-icon.png">
  <link rel="manifest" href="/polyrhythms/site.webmanifest">
  <link rel="shortcut icon" href="/polyrhythms/favicon.ico">
  <meta name="apple-mobile-web-app-title" content="Polyrhythms">
  <meta name="application-name" content="Polyrhythms">
  <meta name="msapplication-TileColor" content="#222222">
  <meta name="msapplication-config" content="/polyrhythms/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Roboto+Condensed&display=swap" rel="stylesheet">

  <style>

html {
  color: #fff;
  font-family: "Inter", sans-serif;
  scroll-behavior: smooth;
  display: flex;
  justify-content: center;
}

body {
  margin: 0.6rem 3vh;
  background: #222;
  width: 100%;
  max-width: 24rem;
}

h1 {
  margin: 1.2rem 0 1.5rem;
}

h2 {
  margin: 1.8rem 0 1.5rem;
}

h3 {
  margin: 0.9rem 0 1.5rem;
}

.form-group {
  position: relative;
}

input {
  width: 100%;
  box-sizing: border-box;
  font-family: "Inter", sans-serif;
  font-size: 1rem;
  text-align: center;
  line-height: 2.4rem;
  padding-right: 3.3rem;
  border: 2px solid #444;
  border-radius: .45rem;
  background: #111;
  color: #fff;
}

label {
  position: absolute;
  top: calc(50% - 0.5rem);
  right: calc(50% - 2.7rem);
  color: #fff;
  font-size: 1rem;
  line-height: 1rem;
}

.change-buttons {
 display: flex;
  margin: .3rem 0 1.5rem;
}

a {
  display: inline-block;
  color: #fff;
  text-align: center;
  font-size: 1rem;
  margin-right: .3rem;
  line-height: 2.4rem;
  background: #111;
  border-radius: .45rem;
  text-decoration: none;
  font-weight: 700;
}

a:last-child {
  margin-right: 0;
}

.button-3 {
  flex: 4;
}

.button-2 {
  flex:3;
}

.button-1 {
  flex: 2;
}

h2 {
  margin: 1.8rem 0 1.5rem;
}

.bold {
  font-weight: 700;
}

#table {
  display: flex;
  flex-direction: column;
  margin: 1.5rem 0 1.2rem;
}

.row {
  display: flex;
  margin-bottom: 0.75rem;
}

.cell-1,
.cell-2 {
  line-height: 1rem;
}

.cell-1 {
  font-weight: 700;
  margin-right: 1.5rem;
  width: 2.7rem;
  font-size: 1.05rem;
}

.cell-2 {
  cursor: pointer;
}

.footer {
  width: 100%;
  margin: 3rem 0 4.5rem;
  display: flex;
  justify-content: center;
}

.butt {
  box-sizing: border-box;
  padding: .9rem 3rem;
  border-radius: 3rem;
  text-align: center;
  text-decoration: none;
  color: #ffffff;
  width: 100%;
  cursor: pointer;
}

.on-1 {
  background: #121212;

}

.on-1:hover {
  opacity: 1;
  color: #121212;
  background: #ffffff;
}
    
  </style>
  
</head>
<body>
  
  <h1>Polyrhythms</h1>
  <div class="form-group">
    <label for="current-bpm">bpm</label>
    <input type="text" name="current-bpm" value="120.00" id="bpmInput" inputmode="decimal" pattern="[0-9]*" step="any"></input>
  </div>
  <div class="change-buttons">
    <a href="#" class="button-3" onclick="changeBpm(-10)" id="A-link">---</a>
    <a href="#" class="button-2" onclick="changeBpm(-1)" id="A-link">--</a>
    <a href="#" class="button-1" onclick="changeBpm(-0.1)" id="A-link">-</a>
    <a href="#" class="button-1" onclick="changeBpm(0.1)" id="A-link">+</a>
    <a href="#" class="button-2" onclick="changeBpm(1)" id="A-link">++</a>
    <a href="#" class="button-3" onclick="changeBpm(10)" id="A-link">+++</a>
  </div>

  <h2>Calculations</h2>
  <div id="table">
    <div class="row">
      <div class="cell-1">1/2</div>
      <div class="cell-2" id="result12">60.00 bpm</div>
    </div>
    <div class="row">
      <div class="cell-1">2/3</div>
      <div class="cell-2" id="result23">80.00 bpm</div>
    </div>
    <div class="row">
      <div class="cell-1">3/4</div>
      <div class="cell-2" id="result34">90.00 bpm</div>
    </div>
    
    <div class="row">
    </div>
    
    <div class="row">
      <div class="cell-1">4/3</div>
      <div class="cell-2" id="result43">160.00 bpm</div>
    </div>
    <div class="row">
      <div class="cell-1">3/2</div>
      <div class="cell-2" id="result32">180.00 bpm</div>
    </div>
    <div class="row">
      <div class="cell-1">2/1</div>
      <div class="cell-2" id="result21">240.00 bpm</div>
    </div>
    
    <h3>Advanced</h3>
    
    <div class="row">
      <div class="cell-1">3/5</div>
      <div class="cell-2" id="result35">72.00 bpm</div>
    </div>
    <div class="row">
      <div class="cell-1">4/5</div>
      <div class="cell-2" id="result45">96.00 bpm</div>
    </div>
    <div class="row">
    </div>
    <div class="row">
      <div class="cell-1">5/4</div>
      <div class="cell-2" id="result54">150.00 bpm</div>
    </div>
    <div class="row">
      <div class="cell-1">5/3</div>
      <div class="cell-2" id="result53">200.00 bpm</div>
    </div>
  </div>

  <div class="footer">
    <a class="butt on-1" href="https://spiritshopofficial.com">‚Üê Go to Spiritshop</a>
  </div>
  
<script>
 
  let currentBpm = 120.00;
  let isTyping = false;

  function changeBpm(value) {
    currentBpm += value;
    document.getElementById('bpmInput').value = currentBpm.toFixed(2);
    updateResults();
  }

  function updateResults() {
    const bpm12 = (currentBpm / 2).toFixed(2);
    const bpm23 = (currentBpm * 2 / 3).toFixed(2);
    const bpm34 = (currentBpm * 3 / 4).toFixed(2);
    const bpm43 = (currentBpm * 4 / 3).toFixed(2);
    const bpm32 = (currentBpm * 3 / 2).toFixed(2);
    const bpm21 = (currentBpm * 2).toFixed(2);
    //Addvanced
    const bpm35 = (currentBpm * 3 / 5).toFixed(2);
    const bpm45 = (currentBpm * 4 / 5).toFixed(2);
    const bpm54 = (currentBpm * 5 / 4).toFixed(2);
    const bpm53 = (currentBpm * 5 / 3).toFixed(2);
   
    document.getElementById('result12').innerText = bpm12 + " bpm";
    document.getElementById('result23').innerText = bpm23 + " bpm";
    document.getElementById('result34').innerText = bpm34 + " bpm";
    document.getElementById('result43').innerText = bpm43 + " bpm";
    document.getElementById('result32').innerText = bpm32 + " bpm";
    document.getElementById('result21').innerText = bpm21 + " bpm";
    //Advanced
    document.getElementById('result35').innerText = bpm35 + " bpm";
    document.getElementById('result45').innerText = bpm45 + " bpm";
    document.getElementById('result54').innerText = bpm54 + " bpm";
    document.getElementById('result53').innerText = bpm53 + " bpm";

    // Add event listeners to results for inserting into input
    document.getElementById('result12').onclick = () => insertBpm(bpm12);
    document.getElementById('result23').onclick = () => insertBpm(bpm23);
    document.getElementById('result34').onclick = () => insertBpm(bpm34);
    document.getElementById('result43').onclick = () => insertBpm(bpm43);
    document.getElementById('result32').onclick = () => insertBpm(bpm32);
    document.getElementById('result21').onclick = () => insertBpm(bpm21);
    //Advanced
    document.getElementById('result35').onclick = () => insertBpm(bpm35);
    document.getElementById('result45').onclick = () => insertBpm(bpm45);
    document.getElementById('result54').onclick = () => insertBpm(bpm54);
    document.getElementById('result53').onclick = () => insertBpm(bpm53);
  }

  function handleInput() {
    isTyping = true;
  }

  function handleBlur() {
    if (isTyping) {
      isTyping = false;
      let inputBpm = parseFloat(document.getElementById('bpmInput').value.replace(',', '.'));
      if (isNaN(inputBpm)) {
        inputBpm = currentBpm; // Use currentBpm if the input is not a valid number
      }
      currentBpm = inputBpm;
      document.getElementById('bpmInput').value = currentBpm.toFixed(2);
      updateResults();
    }
  }

  function handleKeyPress(event) {
    if (event.key === 'Enter') {
      inputField.blur();
    }
  }

  function insertBpm(value) {
    document.getElementById('bpmInput').value = value;
    currentBpm = parseFloat(value);
    updateResults(); // Update calculations when a result is clicked
  }

  // Add event listeners to the input field for input, blur, and keypress events
  const inputField = document.getElementById('bpmInput');
  inputField.addEventListener('input', handleInput);
  inputField.addEventListener('blur', handleBlur);
  inputField.addEventListener('keypress', handleKeyPress);

  // Add click event listener to clear the input field when tapped on mobile devices
  inputField.addEventListener('click', () => {
    inputField.value = '';
  });

  updateResults(); // Initial update

</script>
  
</body>
</html>
